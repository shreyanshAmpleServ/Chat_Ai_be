generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model users {
  id               Int           @id @default(autoincrement())
  username         String        @db.NVarChar(100)
  password         String?       @db.NVarChar(255)
  email            String        @db.NVarChar(255)
  phone            String?       @db.NVarChar(15)
  image            String?       @db.NVarChar(255)
  company          String?       @db.NVarChar(255)
  databaseHost     String?
  databasePort     String?
  databaseName     String?
  databaseUsername String?
  databasePassword String?
  databaseType     String?
  is_active        String        @default("Y") @db.Char(1)
  createdate       DateTime      @default(now()) @db.DateTime
  updatedate       DateTime?     @db.DateTime
  createdby        Int
  updatedby        Int?
  log_inst         Int?
  chat_user        ChatHistory[]
}

model ChatHistory {
  id            Int           @id @default(autoincrement())
  user_id       Int
  title         String?
  startTime     DateTime      @default(now())
  endTime       DateTime?
  totalMessages Int?
  categoryTag   String?
  ChatDetails   ChatDetails[] @relation("ChatToQA")
  chat_user     users         @relation(fields: [user_id], references: [id], onDelete: Cascade)
}

model ChatDetails {
  id          Int         @id @default(autoincrement())
  chatId      Int
  question    String
  aiAnswer    String
  sql_code    String?
  categoryTag String?
  chat        ChatHistory @relation("ChatToQA", fields: [chatId], references: [id], onDelete: Cascade)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime
}
